<!DOCTYPE html>
<html>
	<head>
		<style type='text/css'>
			#letters {
				font-size: 90pt;
				width: 100%;
			}
			.team {
				display: inline-block;
				width: 20%;
				height: 20%;
			}
		</style>
	</head>
	<body>
		<div id='letters'>
		
		</div>
		<div id='teams'>
		</div>
		<div id='qrcode'></div>
		<script type='text/javascript' src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
		<script type='text/javascript' src="/socket.io/socket.io.js"></script>
		<script type='text/javascript' src='./jquery.qrcode.min.js'></script>
		<script type='text/javascript'>
		  var socket = io.connect('http://localhost:8000');
		  socket.emit('start-game');
		  socket.on('game-state', function(data) {
			console.log(data);
			$('#qrcode').empty().qrcode('http://localhost:8000/client.html?id=' + data.id);
			$('#letters').text(data.letters.toUpperCase().split('').join(' '));
			$.each(data.teams, function(i, team) {
				var teamDiv = $('#' + team.name);
				if(teamDiv.length == 0) {
					teamDiv = $("<div class='team' id='" + team.name + "' style='background-color: " + team.name + "'>" + team.name + "<div class='players'></div></div>");
					teamDiv.appendTo("#teams");
				}
				var playersDiv = (".players", teamDiv);
				$.each(team.players, function(j, player) {
					var playerDiv = $('#' + player.name, playersDiv);
					if(playerDiv.length == 0) {
						playerDiv = $("<div class='player' id='" + player.name + "'>" + player.name + "</div>");
						playerDiv.appendTo(playersDiv);
					}
				});
			});
		  });
		</script>
	</body>
</html>